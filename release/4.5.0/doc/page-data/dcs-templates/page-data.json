{"componentChunkName":"component---node-modules-carrotsearch-gatsby-theme-apidocs-templates-documentation-page-js","path":"/dcs-templates/","result":{"data":{"site":{"siteMetadata":{"title":"Carrot2 docs","description":"User and developer manual for the Carrot2 text clustering engine.","lang":"en","indexAlias":"/hello-carrot2/"}},"html":{"frontmatter":{"id":"dcs-templates","title":"Request Templates"},"html":"<article>\n  <h1>Request Templates</h1>\n\n  <p id=\"e72352ca\">\n    This section introduces request templates and why they can be useful to detach algorithm\n    configuration from actual clustering requests.\n  </p>\n\n  <p id=\"e4c7bb30\">\n    As mentioned in the <a href=\"/rest-api-basics/#clustering\">introduction</a>,\n    a clustering query is self-contained and must carry the three required elements:\n    algorithm name, language and documents to be clustered. In practice, the first two elements\n    will rarely change â€“ once the algorithm for a particular task is chosen, it will probably\n    remain constant for all clustering requests. In situations like this we can pull out\n    the constant part of the query into a <strong>template</strong> and use basic\n    composition with the body of a query to get the final request.\n  </p>\n\n  <p id=\"366983a7\">\n    Another useful application of templates is to detach the algorithm and its\n    configuration from the logic that queries the clustering service or to group\n    different algorithms and their tuning variants under much easier to remember\n    aliases.\n  </p>\n\n  <section id=\"new-template\">\n    <h2>\n        <a class=\"anchor\" href=\"#new-template\" aria-hidden=\"true\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to create a request template?\n      </h2>\n\n    <p id=\"new-template:cef6ce78\">\n      Let's explain it by walking through a simple example. For a request\n      body like the one shown below, we can pull out everything up to the documents section:\n    </p>\n\n    <pre><code data-language=\"json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"language\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"English\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"algorithm\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Lingo\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"documents\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"PDF Viewer on Windows\"</span> <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Firefox PDF plugin to view PDF in browser on Windows\"</span> <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Limit CPU usage for flash in Firefox?\"</span> <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span></code></pre>\n\n    <p id=\"new-template:94a7f41b\">\n      Let's create a file called <code>04 foo.json</code> under DCS-relative path:\n      <code>web/service/templates/04 foo.json</code>. The name (identifier)\n      of the template is embedded in the file name: it is <code>foo</code>. The\n      number in front of the alphanumeric name is always stripped (but it is used\n      to sort the templates for display purposes).\n    </p>\n\n    <pre><code data-language=\"json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"language\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"English\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"algorithm\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Lingo\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"parameters\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"preprocessing\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">\"phraseDfThreshold\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">\"wordDfThreshold\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span></code></pre>\n\n    <p id=\"new-template:90720eeb\">\n      The <code>foo</code> template contains constant (but overrideable) elements\n      of our clustering query. Once the DCS is started we can see if the template\n      has been loaded by looking at the startup log message or by\n      running a GET query against the <code>/list</code> endpoint:\n    </p>\n\n    <pre><code data-language=\"json\">...\n  <span class=\"hljs-attr\">\"templates\"</span> <span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-string\">\"frontend-default\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-string\">\"lingo\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-string\">\"stc\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-string\">\"bkmeans\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-string\">\"foo\"</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span></code></pre>\n\n    <p id=\"new-template:b6f6bcb4\">\n      Armed with the template <code>foo</code> we can now assemble a much simpler\n      clustering request containing just the documents to be clustered:\n    </p>\n\n    <pre><code data-language=\"json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"documents\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"field\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"foo bar\"</span> <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"field\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"bar\"</span> <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">{</span> <span class=\"hljs-attr\">\"field\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"baz\"</span> <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span></code></pre>\n\n    <p id=\"new-template:efa1c838\">\n      When posting the documents for clustering, use the\n      <code>template</code> request parameter to provide the the template name\n      (<code>foo</code> in our case):\n    </p>\n\n    <pre><code data-language=\"bash\">curl -X POST --header <span class=\"hljs-string\">\"Content-Type: text/json\"</span> --data-binary @template-request.json <span class=\"hljs-string\">\"http://localhost:8080/service/cluster?indent&amp;template=foo\"</span></code></pre>\n  </section>\n</article>","tableOfContents":[{"heading":"How to create a request template?","anchor":"new-template"}]}},"pageContext":{"slug":"/dcs-templates/"}},"staticQueryHashes":["2081922839"]}