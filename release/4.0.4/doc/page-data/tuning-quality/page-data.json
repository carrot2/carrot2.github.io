{"componentChunkName":"component---node-modules-carrotsearch-gatsby-theme-apidocs-templates-documentation-page-js","path":"/tuning-quality/","result":{"data":{"html":{"frontmatter":{"id":"tuning-quality","title":"Tuning quality"},"html":"<article>\n  <h1>Tuning quality</h1>\n\n  <p id=\"6247fe9f2dbca069d8e97171\">\n    This article discusses approaches to tuning Carrot<sup>2</sup> clustering\n    algorithms.\n  </p>\n\n  <section id=\"input-characteristics\">\n    <h2>\n        <a class=\"anchor\" href=\"#input-characteristics\" aria-hidden=\"true\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Desirable characteristics of input documents\n      </h2>\n\n    <p id=\"729003467017f5384488225a\">\n      The quality of clusters and their labels largely depends on the\n      quality of documents provided on the input. Although there is no\n      general rule for optimum document content, below are some tips worth\n      considering.\n    </p>\n\n    <ul>\n      <li>\n        <p id=\"cda3737f132621fd064dce58\">\n          <strong>Carrot<sup>2</sup> is designed for small to medium collections\n            of documents</strong>. Carrot<sup>2</sup> algorithms perform in-memory\n          clustering. For this reason, as a rule of thumb, Carrot<sup>2</sup>\n          should successfully deal with up to a thousand of documents, a few\n          paragraphs each. For algorithms designed to process millions of\n          documents, check out <a href=\"https://mahout.apache.org/\">the Apache Mahout project</a>\n          or <a href=\"https://carrotsearch.com/lingo4g/\">Carrot Search Lingo4G</a>.\n        </p>\n      </li>\n\n      <li>\n        <p id=\"8b9e95f8cf14a79738375d90\">\n          <strong>Provide a minimum of 100 documents</strong>. Carrot<sup>2</sup>\n          clustering algorithms work better with increasing amount of data. A hundred\n          documents on input is probably the minimum for any statistical significance\n          of features discovered by the algorithm. In general, an optimum number\n          of documents would probably fall between 100 and a few thousands.\n          More than that may cause problems due to in-memory processing.\n        </p>\n      </li>\n\n      <li>\n        <p id=\"4bfcea17e6542ac7404c6341\">\n          <strong>Provide query-context snippets instead of entire documents</strong>.\n          If the input\n          documents are a result of some search query, provide contextual\n          snippets related to that query (similar to what web search engines\n          return), instead of full document content. Not only will this speed up\n          processing, but should also guide the clustering algorithm to discover\n          query-related spectrum of topics.\n        </p>\n      </li>\n\n      <li>\n        <p id=\"af4825062fe1bb5c3f0a571a\">\n          <strong>Minimize noise in the input documents</strong>. All kinds of noisy\n          fragments in the input like truncated sentences, random alphanumerical strings\n          or repeated boilerplate may decrease the quality of cluster labels.\n          If you are extracting query context for clustering, retrieving complete sentences\n          instead of truncated fragments should improve cluster labels even further.\n        </p>\n      </li>\n    </ul>\n  </section>\n\n  <section id=\"choosing-the-algorithm\">\n    <h2>\n        <a class=\"anchor\" href=\"#choosing-the-algorithm\" aria-hidden=\"true\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Choosing the clustering algorithm\n      </h2>\n\n    <p id=\"233d88875b0485a91bfce5ed\">\n      Carrot<sup>2</sup> offers <a href=\"/algorithms/\">several clustering algorithms</a>.\n      These algorithms differ in algorithmic approaches to solving the problem and vary in\n      performance characteristics and in how they find and then label document clusters.\n    </p>\n\n    <p id=\"7d7bae910ae6d09ff9b66716\">\n      It's quite difficult to give one clear recommendation as to which algorithm is\n      \"the best\": the decision is a problem of weighing multiple criteria such as performance or cluster\n      label legibility. Compare the following three sets of cluster labels acquired for the\n      same input using different algorithms:\n    </p>\n\n    <figure class=\"round\">\n      <div style=\"position: relative\">\n        <span style=\"padding-bottom: 51.66666666666666%; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABk0lEQVQoz1VSiY6EIAz1/39ys+OFgAiIN/q2rTNOlqTRQPr6jhaT7+BDxL7vuK4L4KJz5Q3JGxjbo+97eO+xbRvysWPyWu6GYZBvjBHHcUhfMagfqM5gXRac58lQEMhjxdCVqJuWGsLTcJ0Zrv1BWZZo2xZN0yCE8BAq0qDQaYN5npFz/sdwdJreNEZiIG9vwNEpWGupDMZxvJW9TxH1L15VjWlKXxZvhq57oapbYaIJeGYV+UDQL2J23yulxI6P7CI5elAd4kP7FEBmGHpFdmhhMk0TsTzJlozYNzKAyxiDlJL4y5YV0ZQ3IPnEl8/J5KGuoI19PPpIjrZG13VSzJCDeTyMtkLTKpqkZRJ7uW07zn2BN7WE0pNf67qKvQwYTEVylYBxKMz0G0pfSyh8yUzYi3lZkbeZpClhyEx4GEuSUEiypXViuVzs4QPIibFkTo0fOLUQRyxTQLANhdLIvrEd3MCAnsOiID/seBhvwc2Qltf2jth5aXTOYSDgdYpIg6b/7w7y4VCSu31z7l7u5dlh4A+jjgASRdjYDgAAAABJRU5ErkJggg==')\" class=\"fluid preview\"> </span>\n        <img class=\"fluid\" alt=\"The same input clustered with different algorithms.\" title src=\"../static/62e4b07c1a5a13d15e4cac042963b6b9/37523/output-compared-light.png\" srcset=\"../static/62e4b07c1a5a13d15e4cac042963b6b9/e9ff0/output-compared-light.png 180w,\n../static/62e4b07c1a5a13d15e4cac042963b6b9/f21e7/output-compared-light.png 360w,\n../static/62e4b07c1a5a13d15e4cac042963b6b9/37523/output-compared-light.png 720w,\n../static/62e4b07c1a5a13d15e4cac042963b6b9/302a4/output-compared-light.png 1080w,\n../static/62e4b07c1a5a13d15e4cac042963b6b9/07a9c/output-compared-light.png 1440w,\n../static/62e4b07c1a5a13d15e4cac042963b6b9/a429e/output-compared-light.png 1717w\" sizes=\"(max-width: 720px) 100vw, 720px\">\n      </div>\n      <figcaption>\n        <p>\n          The same input (\"data mining\" search results) clustered with three different clustering\n          algorithms.\n        </p>\n      </figcaption>\n    </figure>\n\n    <p id=\"899f31e66029ef24a5eb759a\">\n      Many people (including us) have a subjective feeling that the Lingo-family of algorithms\n      (<a href=\"/algorithms/#lingo\">Lingo</a> and\n      <a href=\"/algorithms/#lingo3g\">Lingo3G</a>) delivers more intuitive and diverse clusters\n      compared to other algorithms.\n      Sometimes it is other characteristics, such as performance or cluster structure, that should be\n      taken into account.\n    </p>\n\n    <p id=\"8805107852180769d0007702\">\n      The following table summarizes key characteristics of each algorithm shipped in\n      Carrot<sup>2</sup>.\n    </p>\n\n    <figure class=\"round\">\n      <table>\n        <caption>A comparison of key characteristics of Carrot<sup>2</sup> clustering algorithms.\n        </caption>\n        <thead>\n        <tr>\n          <th scope=\"col\">Feature</th>\n          <th scope=\"col\">Lingo</th>\n          <th scope=\"col\">STC</th>\n          <th scope=\"col\">k-means</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <th scope=\"row\">Cluster diversity</th>\n          <td><strong>High</strong>, many small (outlier) clusters highlighted</td>\n          <td><strong>Low</strong>, small (outlier) clusters rarely highlighted</td>\n          <td><strong>Low</strong>, small (outlier) clusters rarely highlighted</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">Cluster labels</th>\n          <td><strong>Longer</strong>, often more descriptive</td>\n          <td><strong>Shorter</strong>, but still appropriate</td>\n          <td><strong>One-word only</strong>, may not always describe all documents in the cluster\n          </td>\n        </tr>\n        <tr>\n          <th scope=\"row\">Scalability</th>\n          <td>\n            <strong>Low</strong>. For more than about 1000 documents, Lingo clustering will take a\n            long time and large memory\n            <footnote></footnote>\n            .\n          </td>\n          <td><strong>High</strong></td>\n          <td><strong>Low</strong>, based on similar data structures as Lingo.</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">Overlapping clusters</th>\n          <td><strong>Yes</strong>. A document can belong to more than one cluster.</td>\n          <td><strong>Yes</strong>. A document can belong to more than one cluster.</td>\n          <td><strong>No</strong>. A document can belong to only one cluster.</td>\n        </tr>\n        </tbody>\n      </table>\n    </figure>\n\n    <p class=\"warning\" id=\"0a24a09d8c32cf21a368a515_0\">\n      <a href=\"/algorithms/#lingo3g\">Lingo3G</a>, the commercial algorithm that plugs into\n      Carrot<sup>2</sup> has a <a href=\"https://carrotsearch.com/lingo3g/comparison/\">separate\n      page</a> where its features are compared against the open source algorithms.\n    </p>\n\n    <p id=\"2c96df19475a4698e5e38169\">\n      While the table above can be useful to determine which algorithm to choose,\n      the ultimate judgment should be based on an empirical evaluation with your specific document\n      collection.\n    </p>\n  </section>\n\n  <section id=\"tweaking-parameters\">\n    <h2>\n        <a class=\"anchor\" href=\"#tweaking-parameters\" aria-hidden=\"true\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Tweaking parameters\n      </h2>\n\n    <p id=\"1ef287879a2ada79f86aaeef\">\n      The default settings that come with each algorithm are good for an average case. Each\n      algorithm comes with a number of attributes which can be used to tune its output and\n      runtime characteristics.\n      You can easily <a href=\"/java-api-basics/#tweaking-attributes\">adjust attributes in Java API</a>.\n      An robust way to <a href=\"/rest-api-basics/#models\">override attributes in REST API</a>\n      is to use request model classes.\n    </p>\n\n    <p id=\"d693bf949c73f0a13397ac54\">\n      In order to achieve good cluster labels and high clustering quality it is vital\n      to <strong>adjust the default language resources</strong> so that they exclude any common\n      terms, phrases and expressions specific to:\n    </p>\n\n    <ul>\n      <li id=\"e817c36f2a209d9ef3c35b9c\">the selected language (the default resources should contain a reasonable number of these\n        already),\n      </li>\n      <li id=\"79c6c77b59bbcac3ccc80482\">the domain of documents being clustered.</li>\n    </ul>\n\n    <p id=\"f5686cfc63f4f5c79683b1a9\">\n      For example, if clustering documents from the medical domain, certain expressions and terms\n      may be obvious and trivial to the domain. Forming clusters out of these wouldn't be of any\n      value to the users. By excluding such expressions the algorithms are guided to look for other,\n      perhaps more interesting alternative content.\n    </p>\n\n    <p id=\"3a941601c74bfb24c1c9c9de\">\n      Lexical resources can be adjusted both in the\n      <a href=\"/java-language-components/#tweaking-lexical-data-resources\">Java API</a>\n      and in the\n      <a href=\"/dcs-language-components/\">REST API</a>.\n    </p>\n  </section>\n</article>","tableOfContents":[{"heading":"Desirable characteristics of input documents","anchor":"input-characteristics"},{"heading":"Choosing the clustering algorithm","anchor":"choosing-the-algorithm"},{"heading":"Tweaking parameters","anchor":"tweaking-parameters"}]}},"pageContext":{"slug":"/tuning-quality/"}},"staticQueryHashes":["1164750013"]}